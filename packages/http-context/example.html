<head>
  <!-- We don't recommend using github as a CDN. This is just for the example code-->
  <script src="./dist/bundle.js"></script>
  <title>Example Tracking Page</title>
</head>

<body>
  <form id='example_form'>
    <input id="document_title" />
    <input id="user_name" />
  </form>
  <script>
    // Persist the current page context into the session. This helps us capture
    // http parameters on a landing page which can be used later.
    trkm.session.merge(trkm.context());

    // setup a mapping between the page context and a form on the web page.
    const contextToFormMap = {
      formQuery: {
        tag: 'form',
        name: 'id',
        value: 'example_form'
      },
      destination: [
        {
          // pull a value from document.title
          pullFrom: {
            required: false,
            source: {
              type: 'context',
              jsonPath: 'document.url.urlParams.userName'
            }
          },
          // Find an input tag on the form using attribute name and the value
          destination: {
            tag: 'input',
            name: 'id',
            value: 'user_name'
          }
        },
        {
          // Taking advantage of 'defaults', we can pullFrom an object
          // using the JsonPath and place on an HTMLElement destination
          // using the a string value (document_title in this case): that
          // value compared against either the `id` attribute or `name`
          // attribute of the HTMLElement
          pullFrom: 'document.title',
          destination: 'document_title',
        },
      ]
    };

    // At anytime, we can apply the mapping. formApply will find the
    // HTMLFormElement on the page 
    trkm.formApply(contextToFormMap, trkm.session.get());

  </script>
  <p>The form field should contain the title of the page.</p>
</body>